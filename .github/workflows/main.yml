name: Check Service Account JSON

on:
  workflow_dispatch:

jobs:
  check-json:
    runs-on: ubuntu-latest
    steps:
      - name: Write service_account.json from secret
        run: echo '${{ secrets.SERVICE_ACCOUNT_JSON }}' > service_account.json

      - name: Show basic info
        run: |
          echo "🔍 Checking JSON structure..."
          python3 - <<'PY'
          import json
          with open("service_account.json") as f:
              data = json.load(f)
          print("✅ JSON loaded successfully")
          print("client_email:", data.get("client_email"))
          print("project_id:", data.get("project_id"))
          print("private_key starts with:", data.get("private_key", "")[:30])
          print("private_key ends with:", data.get("private_key", "")[-30:])
          PY
